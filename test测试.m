x=[1:50];
y1=[3.8317 3.0438 3.0378 3.0096 1.5445 1.7766 2.1796 1.8505 1.8234 1.5703 1.6636 1.4317 1.301 1.5522 0.96334 1.1529 0.79135 1.3942 0.83767 1.3315 1.5118 1.2077 1.359 1.7978 1.2519 1.1546 1.7481 2.1042 2.1914 2.0771 2.0312 2.0033 3.839 6.2368 7.1921 6.2387 4.0709 5.333 5.4911 8.4795 3.2668 4.4476 4.5369 2.5803 4.4976 4.3841 2.7196 4.9246 3.707 4.956];
%误差最小
y2=[9.122293100499014,8.171222527885316,16.843739053020492,16.911161012325675,14.032344056304947];
figure(2)
P1=plot(x,y1);
grid on
xlabel('隐含层节点数')%激活函数为sig
ylabel('优化后测试样本预测误差')
y1=[4.34800264953029,3.58227688984040,3.58227688984040,3.58227688984040,3.49450764408588,3.49450764408588,3.49450764408588,3.49450764408588,3.49450764408588,3.49450764408588,3.49450764408588,3.49450764408588,3.49450764408588,3.49450764408588,3.49450764408588,3.40684580914614,3.40684580914614,3.17336391148788,3.17336391148788,3.17336391148788,3.17336391148788,3.17336391148788,3.17336391148788,3.17336391148788,3.17336391148788,3.17336391148788,3.17336391148788,3.14387058684763,3.14387058684763,3.14387058684763,3.14387058684763,3.14273830847674,3.14273830847674,3.14273830847674,3.09017220906701,3.09017220906701,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.53081105194158,2.38774329987413,2.38774329987413,2.38774329987413,2.38774329987413,2.38774329987413,2.38774329987413,2.33935741320766,2.33935741320766,2.32359670768183,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588,2.19823806974588];


%激活函数为sine
x=[1:50];
y=[]
figure(1)
P1=plot(x,y);
grid on
xlabel('隐含层节点数')
ylabel('优化后测试样本预测误差')

%%AGA与改进后的AGA进化图比较

y1=[4.67192066949767,3.80666346117614,3.80666346117614,3.80666346117614,3.80666346117614,3.80666346117614,3.64589865732792,3.16531396719275,3.07240864325133,3.01079970134289,3.01079970134289,3.01079970134289,3.01079970134289,3.01079970134289,3.01079970134289,3.01079970134289,3.01079970134289,3.01079970134289,2.28797157285278,2.28797157285278,2.28797157285278,2.28797157285278,2.28797157285278,2.28797157285278,2.28797157285278,2.28797157285278,2.28797157285278,2.28182173168115,2.28182173168115,2.28182173168115,2.28182173168115,2.28182173168115,2.28182173168115,2.28182173168115,2.28182173168115,2.28182173168115,2.28182173168115,2.28008024195549,2.28008024195549,2.28008024195549,2.28008024195549,2.28008024195549,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380,1.76950639683380];
y2=[6.26344152393323,6.20861072909499,6.20861072909499,4.69168398318740,4.69168398318740,4.60115626267778,4.60115626267778,4.60115626267778,4.60115626267778,3.90198521409188,3.90198521409188,3.68806753248510,3.68806753248510,3.68806753248510,3.68806753248510,3.68806753248510,3.68806753248510,3.47383786987103,3.47383786987103,3.47383786987103,3.27332278326597,3.27332278326597,3.27332278326597,3.27332278326597,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,3.14744983273958,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.89270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.58270218312973,2.57270218312973,2.57270218312973,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947,2.46959571118947];
figure(1)
P1=plot(1:100,y1,'r-o',1:100,y2,'b-*');
grid on
legend('改进后的进化过程','未改进的进化过程')
ylabel('误差的变化')
xlabel('遗传代数')


%%画三种模型预测相对误差图
%BP误差
x1=[2.90 12.51 0.85 10.15 17.30 12.29];
%ELM误差
x2=[0.49 4.23 0.46 3.74 17.04 8.04 ];
%GA_ELM误差
x3=[0.08 2.89 0.27 2.05 5.55 0.97];
y=[1 14 17 29 33 49];

figure(1)
P1=plot(y,x1,'r-*',y,x2,'b:o',y,x3,'k--+');
grid off
legend('BP网络模型','ELM模型','AGA ELM模型')
xlabel('样本序号')
ylabel('相对误差(%)')
title('三种模型预测相对误差')
box off

%%计算MAE，MAPE，RMSE
%实际值
x=[16.40 10.58 22.64 12.00 8.13 17.34];
%BP预测值
x1=[15.923 11.904 22.448 10.781 9.537 15.208];
%ELM预测值
x2=[16.480 11.028 22.535 11.551 9.516 18.734];
%AGA_ELM预测值
x3=[16.387 10.886 22.702 12.246 8.582 17.509];
MAE=(sum(abs(x-x1)))/6;
MAPE=100*(sum(abs(x-x3)./x))/6;
RMSE=sqrt(sum((x-x3).^2)/6)

